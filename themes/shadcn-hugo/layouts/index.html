{{ define "main" }}
<div class="container relative pb-10">
  <!-- Hero Section -->
  <section class="mx-auto flex max-w-[980px] flex-col items-center gap-2 py-8 md:py-12 md:pb-8 lg:py-24 lg:pb-20">
    <h1 class="text-center text-3xl font-bold leading-tight tracking-tighter md:text-6xl lg:leading-[1.1]">
      {{ .Site.Params.siteName }}
    </h1>
    <p class="max-w-[750px] text-center text-lg text-muted-foreground sm:text-xl">
      {{ .Site.Params.heroDescription | default .Site.Params.description }}
    </p>
    <div class="flex w-full items-center justify-center space-x-4 py-4 md:pb-10">
      <a href="/posts/">
        {{ partial "ui/button.html" (dict "text" "开始阅读" "variant" "default" "class" "gap-2") }}
      </a>
      {{ if .Site.Params.github }}
      <a href="{{ .Site.Params.github }}" target="_blank">
        {{ partial "ui/button.html" (dict "text" "<i class='fa-brands fa-github'></i> GitHub" "variant" "outline" "class" "gap-2") }}
      </a>
      {{ end }}
    </div>
  </section>

  {{ partial "ui/separator.html" (dict "class" "my-8") }}

  <!-- Latest Posts -->
  <section>
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold tracking-tight flex items-center gap-2">
        <i class="fa-solid fa-wand-magic-sparkles text-primary"></i>
        最新文章
      </h2>
      <a href="/posts/" class="text-sm font-medium text-primary hover:underline flex items-center gap-1">
        查看全部
        <i class="fa-solid fa-arrow-right text-xs"></i>
      </a>
    </div>
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-{{ .Site.Params.gridColumns | default 4 }}">
      {{ $gridColumns := .Site.Params.gridColumns | default 4 }}
    {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts") (.Site.Params.pagerSize | default 8) }}
      {{ range $paginator.Pages }}
        {{ partial "post-card.html" (dict "page" . "gridColumns" $gridColumns) }}
      {{ end }}
    </div>
    
    <div class="mt-10">
      {{ partial "ui/pagination.html" . }}
    </div>
  </section>

  {{ partial "ui/separator.html" (dict "class" "my-12") }}

  <!-- Popular Tags -->
  <section>
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold tracking-tight flex items-center gap-2">
        <i class="fa-solid fa-tags text-primary"></i>
        热门标签
      </h2>
      <a href="/tags/" class="text-sm font-medium text-primary hover:underline flex items-center gap-1">
        查看全部
        <i class="fa-solid fa-arrow-right text-xs"></i>
      </a>
    </div>
    <div class="flex flex-wrap gap-3">
      {{ range first 30 .Site.Taxonomies.tags.ByCount }}
        <a href="{{ .Page.RelPermalink }}" class="inline-flex items-center rounded-full border px-4 py-1.5 text-sm font-medium transition-all hover:bg-primary hover:text-primary-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 bg-background text-foreground gap-2 group">
          <i class="fa-solid fa-tag text-xs text-muted-foreground group-hover:text-primary-foreground transition-colors"></i>
          {{ .Page.Title }}
          <span class="ml-1 rounded-full bg-muted px-2 py-0.5 text-[10px] font-bold group-hover:bg-primary-foreground/20 group-hover:text-primary-foreground transition-colors">
            {{ .Count }}
          </span>
        </a>
      {{ end }}
    </div>
  </section>

  {{ if .Site.Params.links }}
  {{ partial "ui/separator.html" (dict "class" "my-12") }}

  <!-- Links Section -->
  <section>
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold tracking-tight flex items-center gap-2">
        <i class="fa-solid fa-link text-primary"></i>
        友情链接
      </h2>
    </div>
    <div class="flex flex-wrap gap-4">
      {{ range .Site.Params.links }}
        <a href="{{ .url }}" target="_blank" rel="noreferrer" class="text-sm font-medium text-muted-foreground hover:text-primary transition-colors underline underline-offset-4">
          {{ .name }}
        </a>
      {{ end }}
    </div>
  </section>
  {{ end }}
</div>
{{ end }}
